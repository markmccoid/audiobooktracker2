{
  "version": 3,
  "sources": ["../../../../app/routes/__auth/login.tsx"],
  "sourcesContent": ["import { ActionFunction, json } from \"@remix-run/node\";\r\nimport { Form, useActionData } from \"@remix-run/react\";\r\nimport React from \"react\";\r\nimport InputField from \"~/components/input/InputField\";\r\nimport { login, signup, SignupData } from \"~/data/auth.server\";\r\nimport { authFormValidation } from \"~/utils/validation\";\r\nimport type { AuthFormData, LoginServerErrors } from \"~/types/authTypes\";\r\n\r\n//-------------------------------------------------\r\n//-- Action Error Type\r\n//-- Union errors type from server and validation error types\r\n// -------------------------------------------------\r\nexport type ActionErrors =\r\n  | LoginServerErrors\r\n  | {\r\n      name: \"Validation Errors\";\r\n      email?: string;\r\n      password?: string;\r\n    };\r\n\r\n//---------------------------------\r\n//-- Action for Login\r\n//---------------------------------\r\nexport const action: ActionFunction = async ({ request }) => {\r\n  const formData = await request.formData();\r\n  const { email, password } = Object.fromEntries(formData) as AuthFormData;\r\n  // Validate email and password (we won't use password validation)\r\n  const validationErrors = authFormValidation({ email, password });\r\n  if (validationErrors?.email) {\r\n    return json({\r\n      name: \"Validation Errors\",\r\n      email: validationErrors.email?._errors.join(\"-\"),\r\n    });\r\n  }\r\n\r\n  try {\r\n    return await login({ email, password });\r\n  } catch (error) {\r\n    if (error instanceof Error) {\r\n      let errorObj = error as LoginServerErrors;\r\n      if (errorObj.name === \"Server Login Error\") return json(error);\r\n    }\r\n    throw new Error(String(error));\r\n  }\r\n};\r\n\r\nfunction Login() {\r\n  const actionData = useActionData<ActionErrors>();\r\n\r\n  return (\r\n    <div className=\"flex flex-col flex-grow border border-black justify-center items-center\">\r\n      <h1 className=\"text-3xl mb-4\">Audiobook Tracker Login</h1>\r\n      <Form\r\n        method=\"post\"\r\n        className=\"flex flex-col rounded-lg p-6 w-96 bg-gray-400\"\r\n      >\r\n        {actionData?.name === \"Server Login Error\" && (\r\n          <div>{actionData.message}</div>\r\n        )}\r\n        <InputField\r\n          label=\"Email\"\r\n          name=\"email\"\r\n          type=\"text\"\r\n          error={\r\n            actionData?.name === \"Validation Errors\"\r\n              ? actionData?.email\r\n              : undefined\r\n          }\r\n        />\r\n        <InputField\r\n          label=\"Password\"\r\n          name=\"password\"\r\n          type=\"password\"\r\n          error={\r\n            actionData?.name === \"Validation Errors\"\r\n              ? actionData?.password\r\n              : undefined\r\n          }\r\n        />\r\n        <div className=\"w-full text-center\">\r\n          <button\r\n            type=\"submit\"\r\n            name=\"button\"\r\n            value=\"login\"\r\n            className=\"rounded-lg bg-emerald-800 px-3 py-2 text-xl text-white\"\r\n          >\r\n            Sign In\r\n          </button>\r\n        </div>\r\n      </Form>\r\n    </div>\r\n  );\r\n}\r\n\r\nexport default Login;\r\n"],
  "mappings": ";;;;;;;;;;;;;;AAIA,kBAA0C;AA+CpC;AALN,SAAS,QAAQ;AACf,QAAM,aAAa,cAA4B;AAE/C,SACE,mDAAC,SAAI,WAAU,2EACb;AAAA,uDAAC,QAAG,WAAU,iBAAgB,uCAA9B;AAAA;AAAA;AAAA;AAAA,WAAqD;AAAA,IACrD;AAAA,MAAC;AAAA;AAAA,QACC,QAAO;AAAA,QACP,WAAU;AAAA,QAET;AAAA,oDAAY,UAAS,wBACpB,mDAAC,SAAK,qBAAW,WAAjB;AAAA;AAAA;AAAA;AAAA,iBAAyB;AAAA,UAE3B;AAAA,YAAC;AAAA;AAAA,cACC,OAAM;AAAA,cACN,MAAK;AAAA,cACL,MAAK;AAAA,cACL,QACE,yCAAY,UAAS,sBACjB,yCAAY,QACZ;AAAA;AAAA,YAPR;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,UASA;AAAA,UACA;AAAA,YAAC;AAAA;AAAA,cACC,OAAM;AAAA,cACN,MAAK;AAAA,cACL,MAAK;AAAA,cACL,QACE,yCAAY,UAAS,sBACjB,yCAAY,WACZ;AAAA;AAAA,YAPR;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,UASA;AAAA,UACA,mDAAC,SAAI,WAAU,sBACb;AAAA,YAAC;AAAA;AAAA,cACC,MAAK;AAAA,cACL,MAAK;AAAA,cACL,OAAM;AAAA,cACN,WAAU;AAAA,cACX;AAAA;AAAA,YALD;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,UAOA,KARF;AAAA;AAAA;AAAA;AAAA,iBASA;AAAA;AAAA;AAAA,MApCF;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,IAqCA;AAAA,OAvCF;AAAA;AAAA;AAAA;AAAA,SAwCA;AAEJ;AAEA,IAAO,gBAAQ;",
  "names": []
}
